export async function onRequest(c){const {request,env}=c;const P=env.PASSWORD;if(P&&request.headers.get('X-Sarah-Password')!==P)return new Response(JSON.stringify({error:"Unauthorized"}),{status:401,headers:{'Content-Type':'application/json'}});const t=env.TG_Bot_Token,cid=env.TG_Chat_ID;try{const fd=await request.formData(),tg=new FormData();tg.append('chat_id',cid);tg.append('audio',fd.get('file'));const r=await(await fetch("https://api.telegram.org/bot"+t+"/sendAudio",{method:'POST',body:tg})).json();if(!r.ok)return new Response(JSON.stringify(r),{status:400});const fid=r.result.audio?r.result.audio.file_id:(r.result.document?r.result.document.file_id:null);return new Response(JSON.stringify({success:true,file_id:fid}));}catch(e){return new Response(e.message,{status:500});}}