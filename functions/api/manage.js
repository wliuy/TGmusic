export async function onRequest(c){const {request,env}=c;const P=env.PASSWORD;if(P&&request.headers.get('X-Sarah-Password')!==P)return new Response(JSON.stringify({error:"Unauthorized"}),{status:401,headers:{'Content-Type':'application/json'}});if(request.method!=='POST')return new Response("Bad Method",{status:405});try{const p=await request.json();await env.MUSIC_KV.put('song_list',JSON.stringify(p.data||p));return new Response(JSON.stringify({success:true}));}catch(e){return new Response(e.message,{status:500});}}